/*!
 * UserLocation v0.0.1
 * Simple library to get a user's current location using the GeoIP service from GeoCarrot.
 * 
 * https://developers.geocarrot.com
 * 
 * Licensed under Apache-2.0
 * 
 * Copyright 2016 Kevin Smith <kevin@hearsayinteractive.com>
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.UserLocation=t():e.UserLocation=t()})(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=n.cacheTtl,c=void 0===r?604800:r,i=n.fallback,a=void 0!==i&&i,u=n.specificity,l=void 0===u?"general":u;o(this,e),this.coords={latitude:null,longitude:null,accuracy:null},this.opt={cacheTtl:c,fallback:a,specificity:l};var s=void 0,f=void 0;if("exact"===l)f=this.getExact();else{if("general"!==l)throw new Error("Invalid configuration value for location specificity.");f=this.getGeneral()}return f.then(function(){return f}).catch(function(){return s="exact"===a?t.getExact():"general"===a?t.getGeneral():f})}return n(e,[{key:"getExact",value:function(){var e=this,t=new Promise(function(t,o){navigator.geolocation.getCurrentPosition(function(o){e.coords.latitude=o.coords.latitude,e.coords.longitude=o.coords.longitude,e.coords.accuracy=o.coords.accuracy,t(e.coords)},function(e){o(e.message+" (error code: "+e.code+")")})});return t}},{key:"getGeneral",value:function(){var e=this,t=new Promise(function(t,o){fetch("https://geoip.nekudo.com/api/",{}).then(function(n){n.ok?n.json().then(function(n){"error"===n.type?o(n.msg):(e.coords.accuracy=1e3*n.location.accuracy_radius,e.coords.latitude=n.location.latitude,e.coords.longitude=n.location.longitude,t(e.coords))}):o(n.statusText)}).catch(function(e){o(e.message)})});return t}}]),e}();t.default=r,e.exports=t.default}])});
//# sourceMappingURL=UserLocation.min.js.map
