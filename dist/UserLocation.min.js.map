{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:/webpack/bootstrap b91acd2338042c336524","webpack:///src/index.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","id","loaded","modules","call","m","c","p","UserLocation","_ref","_ref$apiKey","apiKey","undefined","_ref$cacheTtl","cacheTtl","_ref$fallback","fallback","_ref$specificity","specificity","_classCallCheck","coordsLoaded","coords","latitude","longitude","accuracy","Error","promise","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","pos","err","message","code","fetch","then","response","ok","json","data","attributes","location","statusText","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,SAAAA,OAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,aAAAD,IAEAD,EAAA,aAAAC,MACCK,KAAA,WACD,mBCNA,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAN,OAGA,IAAAC,GAAAM,EAAAD,IACAN,WACAQ,GAAAF,EACAG,QAAA,EAUA,OANAC,GAAAJ,GAAAK,KAAAV,EAAAD,QAAAC,EAAAA,EAAAD,QAAAK,GAGAJ,EAAAQ,QAAA,EAGAR,EAAAD,QAvBA,GAAAO,KAqCA,OATAF,GAAAO,EAAAF,EAGAL,EAAAQ,EAAAN,EAGAF,EAAAS,EAAA,GAGAT,EAAA,kLCtCqBU,GACnB,QAAAA,GAAAC,GAKG,GAAAC,GAAAD,EAJDE,OAAAA,EAICC,SAAAF,EAJQ,KAIRA,EAAAG,EAAAJ,EAHDK,SAAAA,EAGCF,SAAAC,EAHU,OAGVA,EAAAE,EAAAN,EAFDO,SAAAA,EAECJ,SAAAG,EAFU,QAEVA,EAAAE,EAAAR,EADDS,YAAAA,EACCN,SAAAK,EADa,UACbA,CAAAE,GAAAtB,KAAAW,EACD,IAAIY,IAAe,EAEbC,GACJC,SAAU,KACVC,UAAW,KACXC,SAAU,KAGZ,IAAe,OAAXb,IAAoC,YAAhBO,GAA0C,YAAbF,GACnD,KAAM,IAAIS,OAAM,mEAGlB,IAAMC,GAAU,GAAIC,SAAQ,SAACC,EAASC,GACpC,GAAIT,EACFQ,EAAQP,OACH,IAAoB,UAAhBH,EACTY,UAAUC,YAAYC,mBACpB,SAACC,GACCb,GAAe,EACfC,EAAOC,SAAWW,EAAIZ,OAAOC,SAC7BD,EAAOE,UAAYU,EAAIZ,OAAOE,UAC9BF,EAAOG,SAAWS,EAAIZ,OAAOG,SAC7BI,EAAQP,IAEV,SAACa,GACCL,EAAUK,EAAIC,QAAd,iBAAsCD,EAAIE,KAA1C,WAGC,CAAA,GAAoB,YAAhBlB,EAkBT,KAAM,IAAIO,OAAM,wDAjBhBY,OAAA,uCAA6C1B,MAC1C2B,KAAK,SAACC,GACDA,EAASC,GACXD,EAASE,OAAOH,KAAK,SAACG,GACpBrB,GAAe,EACfC,EAAOC,SAAWmB,EAAKC,KAAKC,WAAWC,SAAStB,SAChDD,EAAOE,UAAYkB,EAAKC,KAAKC,WAAWC,SAASrB,UACjDK,EAAQP,KAGVQ,EAAUU,EAASM,WAAnB,MAGJ,SAACX,GACCL,EAAA,GAAUK,EAAIC,aAStB,OAFAW,SAAQC,IAAIpC,EAAQG,EAAUE,GAEvBU,aA3DUlB","file":"UserLocation.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UserLocation\"] = factory();\n\telse\n\t\troot[\"UserLocation\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b91acd2338042c336524\n **/","export default class UserLocation {\n  constructor({\n    apiKey = null,\n    cacheTtl = 604800, // 7 days\n    fallback = 'exact', // If IP-based geolocation fails\n    specificity = 'general',\n  }) {\n    let coordsLoaded = false;\n\n    const coords = {\n      latitude: null,\n      longitude: null,\n      accuracy: null,\n    };\n\n    if (apiKey === null && (specificity === 'general' || fallback === 'general')) {\n      throw new Error('An API key must be included when using GeoCarrot\\'s GeoIP lookup.');\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      if (coordsLoaded) {\n        resolve(coords);\n      } else if (specificity === 'exact') {\n        navigator.geolocation.getCurrentPosition(\n          (pos) => {\n            coordsLoaded = true;\n            coords.latitude = pos.coords.latitude;\n            coords.longitude = pos.coords.longitude;\n            coords.accuracy = pos.coords.accuracy;\n            resolve(coords);\n          },\n          (err) => {\n            reject(`${err.message} (error code: ${err.code})`);\n          }\n        );\n      } else if (specificity === 'general') {\n        fetch(`https://geoip.maplasso.com/api/?key=${apiKey}`, {})\n          .then((response) => {\n            if (response.ok) {\n              response.json().then((json) => {\n                coordsLoaded = true;\n                coords.latitude = json.data.attributes.location.latitude;\n                coords.longitude = json.data.attributes.location.longitude;\n                resolve(coords);\n              });\n            } else {\n              reject(`${response.statusText})`);\n            }\n          },\n          (err) => {\n            reject(`${err.message}`);\n          });\n      } else {\n        throw new Error('Invalid configuration value for location specificity.');\n      }\n    });\n\n    console.log(apiKey, cacheTtl, fallback);\n\n    return promise;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":"/source/"}