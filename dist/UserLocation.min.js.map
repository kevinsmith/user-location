{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:/webpack/bootstrap 1d8bc0de53b9c42c4ac0","webpack:///src/index.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","id","loaded","modules","call","m","c","p","UserLocation","_ref","_ref$apiKey","apiKey","undefined","_ref$cacheTtl","cacheTtl","_ref$fallback","fallback","_ref$specificity","specificity","_classCallCheck","coords","latitude","longitude","accuracy","opt","promise","console","log","Error","getExact","getGeneral","_this","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","pos","err","message","code","_this2","fetch","then","response","ok","json","data","attributes","location","statusText"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,SAAAA,OAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,aAAAD,IAEAD,EAAA,aAAAC,MACCK,KAAA,WACD,mBCNA,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAN,OAGA,IAAAC,GAAAM,EAAAD,IACAN,WACAQ,GAAAF,EACAG,QAAA,EAUA,OANAC,GAAAJ,GAAAK,KAAAV,EAAAD,QAAAC,EAAAA,EAAAD,QAAAK,GAGAJ,EAAAQ,QAAA,EAGAR,EAAAD,QAvBA,GAAAO,KAqCA,OATAF,GAAAO,EAAAF,EAGAL,EAAAQ,EAAAN,EAGAF,EAAAS,EAAA,GAGAT,EAAA,waCtCqBU,aACnB,QAAAA,GAAAC,GAKG,GAAAC,GAAAD,EAJDE,OAAAA,EAICC,SAAAF,EAJQ,KAIRA,EAAAG,EAAAJ,EAHDK,SAAAA,EAGCF,SAAAC,EAHU,OAGVA,EAAAE,EAAAN,EAFDO,SAAAA,EAECJ,SAAAG,EAFU,QAEVA,EAAAE,EAAAR,EADDS,YAAAA,EACCN,SAAAK,EADa,UACbA,CAAAE,GAAAtB,KAAAW,GACDX,KAAKuB,QACHC,SAAU,KACVC,UAAW,KACXC,SAAU,MAEZ1B,KAAK2B,KAAQb,OAAAA,EAAQG,SAAAA,EAAUE,SAAAA,EAAUE,YAAAA,EACzC,IAAIO,GAAA,MAIJ,IAFAC,QAAQC,IAAI9B,KAAK2B,KAGK,OAApB3B,KAAK2B,IAAIb,SACiB,YAAzBd,KAAK2B,IAAIN,aAAmD,YAAtBrB,KAAK2B,IAAIR,UAEhD,KAAM,IAAIY,OAAM,mEAGlB,IAAoB,UAAhBV,EACFO,EAAU5B,KAAKgC,eACV,CAAA,GAAoB,YAAhBX,EAGT,KAAM,IAAIU,OAAM,wDAFhBH,GAAU5B,KAAKiC,aAKjB,MAAOL,gDAGE,GAAAM,GAAAlC,KACH4B,EAAU,GAAIO,SAAQ,SAACC,EAASC,GACpCC,UAAUC,YAAYC,mBACpB,SAACC,GACCP,EAAKX,OAAOC,SAAWiB,EAAIlB,OAAOC,SAClCU,EAAKX,OAAOE,UAAYgB,EAAIlB,OAAOE,UACnCS,EAAKX,OAAOG,SAAWe,EAAIlB,OAAOG,SAClCU,EAAQF,EAAKX,SAEf,SAACmB,GACCL,EAAUK,EAAIC,QAAd,iBAAsCD,EAAIE,KAA1C,QAKN,OAAOhB,wCAGI,GAAAiB,GAAA7C,KACL4B,EAAU,GAAIO,SAAQ,SAACC,EAASC,GACpCS,MAAA,uCAA6CD,EAAKlB,IAAIb,WACnDiC,KAAK,SAACC,GACDA,EAASC,GACXD,EAASE,OAAOH,KAAK,SAACG,GACpBL,EAAKtB,OAAOC,SAAW0B,EAAKC,KAAKC,WAAWC,SAAS7B,SACrDqB,EAAKtB,OAAOE,UAAYyB,EAAKC,KAAKC,WAAWC,SAAS5B,UACtDW,EAAQS,EAAKtB,UAGfc,EAAUW,EAASM,WAAnB,MAGJ,SAACZ,GACCL,EAAA,GAAUK,EAAIC,YAIpB,OAAOf,sBAxEUjB","file":"UserLocation.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UserLocation\"] = factory();\n\telse\n\t\troot[\"UserLocation\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1d8bc0de53b9c42c4ac0\n **/","export default class UserLocation {\n  constructor({\n    apiKey = null,\n    cacheTtl = 604800, // 7 days\n    fallback = 'exact', // If IP-based geolocation fails\n    specificity = 'general',\n  }) {\n    this.coords = {\n      latitude: null,\n      longitude: null,\n      accuracy: null,\n    };\n    this.opt = { apiKey, cacheTtl, fallback, specificity };\n    let promise;\n\n    console.log(this.opt);\n\n    if (\n      this.opt.apiKey === null &&\n      (this.opt.specificity === 'general' || this.opt.fallback === 'general')\n    ) {\n      throw new Error('An API key must be included when using GeoCarrot\\'s GeoIP lookup.');\n    }\n\n    if (specificity === 'exact') {\n      promise = this.getExact();\n    } else if (specificity === 'general') {\n      promise = this.getGeneral();\n    } else {\n      throw new Error('Invalid configuration value for location specificity.');\n    }\n\n    return promise;\n  }\n\n  getExact() {\n    const promise = new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(\n        (pos) => {\n          this.coords.latitude = pos.coords.latitude;\n          this.coords.longitude = pos.coords.longitude;\n          this.coords.accuracy = pos.coords.accuracy;\n          resolve(this.coords);\n        },\n        (err) => {\n          reject(`${err.message} (error code: ${err.code})`);\n        }\n      );\n    });\n\n    return promise;\n  }\n\n  getGeneral() {\n    const promise = new Promise((resolve, reject) => {\n      fetch(`https://geoip.maplasso.com/api/?key=${this.opt.apiKey}`, {})\n        .then((response) => {\n          if (response.ok) {\n            response.json().then((json) => {\n              this.coords.latitude = json.data.attributes.location.latitude;\n              this.coords.longitude = json.data.attributes.location.longitude;\n              resolve(this.coords);\n            });\n          } else {\n            reject(`${response.statusText})`);\n          }\n        },\n        (err) => {\n          reject(`${err.message}`);\n        });\n    });\n\n    return promise;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":"/source/"}