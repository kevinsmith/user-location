{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:/webpack/bootstrap f30cf824321e6e0aea57","webpack:///src/index.js","webpack:///~/js-cookie/src/js.cookie.js"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","moduleId","installedModules","id","loaded","modules","call","m","c","p","_jsCookie","UserLocation","_this","_ref","arguments","length","undefined","_ref$cacheTtl","cacheTtl","_ref$fallback","fallback","_ref$specificity","specificity","_classCallCheck","cookieName","coords","latitude","longitude","accuracy","opt","preflightChecks","cachedCoords","getCache","fallbackPromise","originalPromise","options","Promise","resolve","getExact","Error","getGeneral","then","catch","navigator","fetch","_jsCookie2","default","getJSON","_this2","promise","reject","geolocation","getCurrentPosition","pos","setCache","err","message","code","_this3","response","ok","json","type","msg","location","accuracy_radius","statusText","set","expires","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","extend","i","result","attributes","key","init","converter","api","value","document","path","defaults","Date","setMilliseconds","getMilliseconds","JSON","stringify","test","e","write","encodeURIComponent","String","replace","decodeURIComponent","escape","cookie","toUTCString","domain","secure","join","cookies","split","rdecode","parts","slice","charAt","name","read","parse","get","apply","remove","withConverter"],"mappings":"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","file":"UserLocation.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UserLocation\"] = factory();\n\telse\n\t\troot[\"UserLocation\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f30cf824321e6e0aea57\n **/","import Cookies from 'js-cookie';\n\n/**\n * Simple library to get the current user's location, with an\n * optional fallback method of obtaining their coordinates.\n *\n * @class UserLocation\n *\n * @param {object} opt - Optional configuration\n * @param {number} [opt.cacheTtl=604800] - Cache time-to-live in seconds\n * @param {boolean|string} [opt.fallback=false] - Method of obtaining coordinates if initial try\n * fails. Possible values: false, 'general', or 'exact'.\n * @param {string} [opt.specificity='general'] - Initial method of obtaining coordinates. Possible\n * values: 'general' or 'exact'.\n * @return {Promise} - When resolved, returns a coordinates object\n * with latitude, longitude, and accuracy.\n */\nexport default class UserLocation {\n  constructor({\n    cacheTtl = 604800, // 7 days\n    fallback = false, // If 'specificity' fails\n    specificity = 'general',\n  } = {}) {\n    this.cookieName = '__ul_coords';\n\n    this.coords = {\n      latitude: null,\n      longitude: null,\n      accuracy: null, // in meters\n    };\n\n    this.opt = { cacheTtl, fallback, specificity };\n\n    this.preflightChecks();\n\n    const cachedCoords = this.getCache();\n    let fallbackPromise;\n    let originalPromise;\n\n    if (\n      cachedCoords &&\n      cachedCoords.options.fallback === this.opt.fallback &&\n      cachedCoords.options.specificity === this.opt.specificity\n    ) {\n      return new Promise((resolve) => {\n        this.coords = cachedCoords.coords;\n        resolve(this.coords);\n      });\n    }\n\n    if (specificity === 'exact') {\n      originalPromise = this.getExact();\n    } else if (specificity === 'general') {\n      originalPromise = this.getGeneral();\n    } else {\n      throw new Error('Invalid configuration value for location specificity.');\n    }\n\n    return originalPromise\n      .then(() => originalPromise)\n      .catch(() => {\n        if (fallback === 'exact') {\n          fallbackPromise = this.getExact();\n        } else if (fallback === 'general') {\n          fallbackPromise = this.getGeneral();\n        } else {\n          fallbackPromise = originalPromise;\n        }\n\n        return fallbackPromise;\n      });\n  }\n\n  /**\n   * Ensure all required environment APIs are available.\n   *\n   * @return {void}\n   */\n  preflightChecks() {\n    if (typeof navigator === 'undefined' || !('geolocation' in navigator)) {\n      throw new Error('The geolocation API is required but unavailable in this environment.');\n    }\n\n    if (typeof Promise === 'undefined') {\n      throw new Error('The Promise object is required but unavailable in this environment. ' +\n        'Please consider using a Promise polyfill to support all modern browsers.');\n    }\n\n    if (typeof fetch === 'undefined') {\n      throw new Error('The Fetch API is required but unavailable in this environment. ' +\n        'Please consider using a fetch polyfill to support all modern browsers.');\n    }\n  }\n\n  /**\n   * Get coordinates stored in a cookie.\n   *\n   * @private\n   * @return {object} Coordinates\n   */\n  getCache() {\n    return Cookies.getJSON(this.cookieName);\n  }\n\n  /**\n   * Get location using browser's native geolocation API.\n   *\n   * @private\n   * @return {Promise} - navigator.geolocation wrapped in a Promise\n   */\n  getExact() {\n    const promise = new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(\n        (pos) => {\n          this.coords.latitude = pos.coords.latitude;\n          this.coords.longitude = pos.coords.longitude;\n          this.coords.accuracy = pos.coords.accuracy;\n          this.setCache(this.coords);\n          resolve(this.coords);\n        },\n        (err) => {\n          reject(`${err.message} (error code: ${err.code})`);\n        }\n      );\n    });\n\n    return promise;\n  }\n\n  /**\n   * Get location using Nekudo's IP address lookup service\n   *\n   * @private\n   * @return {Promise} - Promise wrapped around Fetch response\n   */\n  getGeneral() {\n    const promise = new Promise((resolve, reject) => {\n      fetch('https://geoip.nekudo.com/api/', {})\n        .then((response) => {\n          if (response.ok) {\n            response.json()\n              .then((json) => {\n                if (json.type === 'error') {\n                  reject(json.msg);\n                } else {\n                  // Convert Maxmind's accuracy in kilometers to this lib's standard in meters\n                  this.coords.accuracy = json.location.accuracy_radius * 1000;\n                  this.coords.latitude = json.location.latitude;\n                  this.coords.longitude = json.location.longitude;\n                  this.setCache(this.coords);\n                  resolve(this.coords);\n                }\n              }\n            );\n          } else {\n            reject(response.statusText);\n          }\n        })\n        .catch((err) => {\n          reject(err.message);\n        });\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save coordinates to a cookie.\n   *\n   * @private\n   * @param {object} coords - Coordinates object\n   * @return {void}\n   */\n  setCache(coords) {\n    Cookies.set(\n      this.cookieName,\n      {\n        coords,\n        options: this.opt,\n      },\n      {\n        expires: this.opt.cacheTtl / 24 / 60 / 60, // Convert to days, as required by Cookies\n      }\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/*!\n * JavaScript Cookie v2.1.2\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api(key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/js-cookie/src/js.cookie.js\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":"/source/"}